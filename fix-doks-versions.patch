i*** a/main.tf
--- b/main.tf
***************
- data "digitalocean_kubernetes_versions" "available" {}
-
- locals {
-   stable_versions = [
-     for v in data.digitalocean_kubernetes_versions.available.valid_versions :
-     v if v.stable == true
-   ]
-
-   stable_version_strings = [ for v in local.stable_versions : v.slug ]
-
-   minor_pattern = "${var.kubernetes_minor_prefix}\\."
-
-   minor_versions = [
-     for s in local.stable_version_strings :
-     s if can(regex(local.minor_pattern, s))
-   ]
-
-   effective_k8s_version = (
-     var.kubernetes_version != "" ? var.kubernetes_version :
-     length(local.minor_versions) > 0 ? local.minor_versions[0] :
-     length(local.stable_version_strings) > 0 ? local.stable_version_strings[0] :
-     ""
-   )
- }
+ data "digitalocean_kubernetes_versions" "minor" {
+   version_prefix = "${var.kubernetes_minor_prefix}."
+ }
+
+ locals {
+   effective_k8s_version = (
+     var.kubernetes_version != "" ?
+     var.kubernetes_version :
+     data.digitalocean_kubernetes_versions.minor.latest_version
+   )
+ }
***************
- resource "digitalocean_vpc" "vpc" {
-   name     = "${var.cluster_name}-vpc"
-   region   = var.region
-   ip_range = var.vpc_cidr
-   tags     = var.tags
- }
+ resource "digitalocean_vpc" "vpc" {
+   name     = "${var.cluster_name}-vpc"
+   region   = var.region
+   ip_range = var.vpc_cidr
+ }

